<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S·∫Øp x·∫øp h·ªçc ph·∫ßn</title>
    <style>
    body {
        font-family: Be Vietnam Pro, sans-serif;
        margin: 20px;
        max-width: 10000px;
        margin: 0 auto;
        padding: 20px;
    }
    .timetable {
        display: grid;
        grid-template-columns: 80px repeat(6, 1fr);
        gap: 2px;
        margin-bottom: 20px;
        overflow-x: auto;
    }
    .cell {
        border: 1px solid #ccc;
        padding: 5px;
        min-height: 100px;
        font-size: 14px;
        background: #fff;
    }
    .header {
        background-color: #1a237e; /* Dark blue header */
        color: white;
        font-weight: bold;
        text-align: center;
        min-height: auto;
        position: sticky;
        top: 0;
        white-space: pre-line;
        padding: 10px 5px;
    }
    .class-slot {
        background-color: #e3f2fd; /* Light blue background */
        margin: 6px;
        padding: 3px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 14px;
        border: 1px solid #bbdefb; /* Light blue border */
    }
    .class-slot:hover {
        background-color: #bbdefb; /* Slightly darker blue on hover */
    }
    .class-slot.selected {
        background-color: #d32f2f; /* Red for selected items */
        color: white;
        border-color: #b71c1c; /* Darker red border */
    }
    .class-slot.disabled {
        background-color: #ddd;
        cursor: not-allowed;
        color: #666;
    }
    .class-slot.hidden {
        display: none;
    }
    .button-container {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin: 20px 0;
    }
    #hideUnselectedBtn, #exportBtn {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        color: white;
        transition: background-color 0.3s;
    }
    #hideUnselectedBtn {
        background-color: #1976d2; /* Blue button */
    }
    #hideUnselectedBtn:hover {
        background-color: #1565c0; /* Darker blue on hover */
    }
    #hideUnselectedBtn.show-all-btn {
        background-color: #d32f2f; /* Red when showing all */
    }
    #exportBtn {
        background-color: #d32f2f; /* Red export button */
    }
    #exportBtn:hover {
        background-color: #c62828; /* Darker red on hover */
    }
    .warning {
        color: #d32f2f; /* Red text for warnings */
        margin-top: 10px;
        padding: 10px;
        background-color: #ffebee; /* Light red background */
        border-radius: 4px;
        border-left: 4px solid #d32f2f; /* Red left border */
    }
    .time-group {
        margin-bottom: 15px;
        border-left: 3px solid #1976d2; /* Blue left border */
        padding-left: 10px;
    }
    .time-header {
        font-weight: bold;
        color: #1976d2; /* Blue text */
        margin-bottom: 5px;
    }
    .subject-item {
        margin-left: 20px;
        margin-bottom: 3px;
        color: #333;
    }
    h2, h3 {
        color: #1a237e; /* Dark blue headers */
    }
    .warning {
        color: #d32f2f;
        margin-top: 10px;
        padding: 10px;
        background-color: #ffebee;
        border-radius: 4px;
        border-left: 4px solid #d32f2f;
        margin-bottom: 10px;
    }
    .incomplete-warning {
        border-left-color: #f57c00; /* Orange for incomplete selection warning */
        background-color: #fff3e0;
        color: #f57c00;
    }
    .important-notice {
    background-color: #e3f2fd; /* Light blue background */
    border: 2px solid #1976d2; /* Blue border */
    border-radius: 8px;
    padding: 15px 20px;
    margin: 20px 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.important-notice h3 {
    color: #1a237e; /* Dark blue */
    margin-top: 0;
    margin-bottom: 15px;
    font-size: 1.2em;
}

.notice-item {
    margin-bottom: 15px;
}

.notice-item:last-child {
    margin-bottom: 0;
}

.notice-item strong {
    color: #d32f2f; /* Red text for emphasis */
    display: block;
    margin-bottom: 5px;
}

.notice-item ul {
    margin: 5px 0;
    padding-left: 25px;
}

.notice-item li {
    margin: 5px 0;
    color: #1a237e; /* Dark blue text */
    font-weight: 500;
}
</style>
</head>
<body>
    <h2>L√™n k·∫ø ho·∫°ch s·∫Øp x·∫øp h·ªçc ph·∫ßn cho QHQT51 H·ªçc k√¨ 2</h2>
    <div class="important-notice">
    <h3>Th√¥ng tin quan tr·ªçng:</h3>
    <div class="notice-item">
        <strong>üóìÔ∏è L·ªãch h·ªçc:</strong>
        <ul>
            <li>C√°c l·ªõp Th·ª© 2, Th·ª© 3: B·∫Øt ƒë·∫ßu t·ª´ tu·∫ßn 10/02/2025</li>
            <li>C√°c l·ªõp c√≤n l·∫°i: B·∫Øt ƒë·∫ßu t·ª´ tu·∫ßn 05/02/2025</li>
        </ul>
    </div>
    <div class="notice-item">
        <strong>üìö S·ªë t√≠n ch·ªâ:</strong>
        <ul>
            <li>M√¥n 3 t√≠n ch·ªâ: M√¥n b·ªï tr·ª£, TACNII, v√† LSQHQTHƒêI</li>
            <li>C√°c m√¥n c√≤n l·∫°i: 2 t√≠n ch·ªâ</li>
        </ul>
    </div>
</div>

<p>H∆∞·ªõng d·∫´n v√† l∆∞u √Ω:</p>
    <ul>
        <li>Click v√†o l·ªõp h·ªçc ƒë·ªÉ ch·ªçn, ph·∫ßn m·ªÅm s·∫Ω ki·ªÉm tra ƒëi·ªÅu ki·ªán ƒë·ªÉ ch·ªçn, tr√°nh m√¢u thu·∫´n</li>
        <li>ƒê√¢y kh√¥ng ph·∫£i ph·∫ßn m·ªÅm ch√≠nh th·ª©c, h√£y nh·ªõ ƒëƒÉng k√Ω theo l·ªãch t·ª´ 8h ng√†y 02/1</li>
        <li>Th√¥ng tin ·ªü trang n√†y c√≥ th·ªÉ c√≥ sai s√≥t, h√£y ki·ªÉm tra kƒ©</li>
        <li>Trang c√≥ ch·ª©c nƒÉng l∆∞u b·∫±ng c√°ch xu·∫•t file .txt</li>
        <li>Khi ƒë√£ ho√†n t·∫•t ch·ªçn c√°c m√¥n, s·∫Ω xu·∫•t hi·ªán n√∫t ·∫©n c√°c l·ªõp kh√¥ng ƒë∆∞·ª£c ch·ªçn</li>
        <li>C√°c l·ªõp Th·ª© 2 Th·ª© 3 b·∫Øt ƒë·∫ßu t·ª´ tu·∫ßn 10/02; c√°c l·ªõp c√≤n l·∫°i b·∫Øt ƒë·∫ßu t·ª´ ng√†y 5/02</li>
        <li>M√¥n b·ªï tr·ª£, TACNII, v√† LSQHQTHƒêI 3 t√≠n ch·ªâ, c√°c m√¥n c√≤n l·∫°i 2 t√≠n ch·ªâ</li>
    </ul>
        <div id="selectedClasses">
        <h3>C√°c l·ªõp ƒë√£ ch·ªçn:</h3>
        <div id="organizedList"></div>
    </div>
    <div id="warnings"></div>
    <div class="button-container">
        <button id="hideUnselectedBtn" style="display: none;">·∫®n c√°c l·ªõp kh√¥ng ch·ªçn</button>
        <button id="exportBtn" style="display: none;">Xu·∫•t k·∫ø ho·∫°ch ƒëƒÉng k√Ω (TXT)</button>
    </div>
    <div class="timetable" id="timetable">
        <div class="cell header">Ca</div>
        <div class="cell header">Th·ª© 2</div>
        <div class="cell header">Th·ª© 3</div>
        <div class="cell header">Th·ª© 4</div>
        <div class="cell header">Th·ª© 5</div>
        <div class="cell header">Th·ª© 6</div>
        <div class="cell header">Th·ª© 7</div>
    </div>


    <script>
        // Define the class data directly
        const classData = [
            // CNXHKH
            {
                maHocPhan: 'FC.003.02',
                tenHocPhan: 'Ch·ªß nghƒ©a x√£ h·ªôi khoa h·ªçc',
                lopHocPhan: 'CNXHKH-QHQT51',
                soThuTu: '1',
                thu: 6,
                ca: 1,
                phongHoc: 'A502',
                giangVien: ''
            },
            {
                maHocPhan: 'FC.003.02',
                tenHocPhan: 'Ch·ªß nghƒ©a x√£ h·ªôi khoa h·ªçc',
                lopHocPhan: 'CNXHKH-QHQT51',
                soThuTu: '2',
                thu: 6,
                ca: 2,
                phongHoc: 'A502',
                giangVien: ''
            },
            {
                maHocPhan: 'FC.003.02',
                tenHocPhan: 'Ch·ªß nghƒ©a x√£ h·ªôi khoa h·ªçc',
                lopHocPhan: 'CNXHKH-QHQT51',
                soThuTu: '3',
                thu: 3,
                ca: 1,
                phongHoc: 'A504',
                giangVien: ''
            },
            {
                maHocPhan: 'FC.003.02',
                tenHocPhan: 'Ch·ªß nghƒ©a x√£ h·ªôi khoa h·ªçc',
                lopHocPhan: 'CNXHKH-QHQT51',
                soThuTu: '4',
                thu: 3,
                ca: 2,
                phongHoc: 'A504',
                giangVien: ''
            },
            {
                maHocPhan: 'FC.003.02',
                tenHocPhan: 'Ch·ªß nghƒ©a x√£ h·ªôi khoa h·ªçc',
                lopHocPhan: 'CNXHKH-QHQT51',
                soThuTu: '5',
                thu: 4,
                ca: 2,
                phongHoc: 'D110',
                giangVien: ''
            },
            {
                maHocPhan: 'FC.010.02',
                tenHocPhan: 'Ch√≠nh tr·ªã h·ªçc ƒë·∫°i c∆∞∆°ng',
                lopHocPhan: 'CTHƒêC-QHQT51',
                soThuTu: '1',
                thu: 6,
                ca: 1,
                phongHoc: 'A602',
                giangVien: ''
            },
            {
                maHocPhan: 'FC.010.02',
                tenHocPhan: 'Ch√≠nh tr·ªã h·ªçc ƒë·∫°i c∆∞∆°ng',
                lopHocPhan: 'CTHƒêC-QHQT51',
                soThuTu: '2',
                thu: 6,
                ca: 2,
                phongHoc: 'A602',
                giangVien: ''
            },
            {
                maHocPhan: 'FC.010.02',
                tenHocPhan: 'Ch√≠nh tr·ªã h·ªçc ƒë·∫°i c∆∞∆°ng',
                lopHocPhan: 'CTHƒêC-QHQT51',
                soThuTu: '3',
                thu: 3,
                ca: 1,
                phongHoc: 'A602',
                giangVien: ''
            },
            {
                maHocPhan: 'FC.010.02',
                tenHocPhan: 'Ch√≠nh tr·ªã h·ªçc ƒë·∫°i c∆∞∆°ng',
                lopHocPhan: 'CTHƒêC-QHQT51',
                soThuTu: '4',
                thu: 3,
                ca: 2,
                phongHoc: 'A602',
                giangVien: ''
            },
            {
                maHocPhan: 'FC.010.02',
                tenHocPhan: 'Ch√≠nh tr·ªã h·ªçc ƒë·∫°i c∆∞∆°ng',
                lopHocPhan: 'CTHƒêC-QHQT51',
                soThuTu: '5',
                thu: 4,
                ca: 1,
                phongHoc: 'D110',
                giangVien: ''
            },
            {
                maHocPhan: 'IR.001.02',
                tenHocPhan: 'L·ªãch s·ª≠ ngo·∫°i giao Vi·ªát Nam',
                lopHocPhan: 'LSNGVN-QHQT51',
                soThuTu: '1',
                thu: 6,
                ca: 1,
                phongHoc: 'D101',
                giangVien: 'Nguy·ªÖn Th√πy Minh, Ho√†ng Th·ªã H·∫°nh Trang'
            },
            {
                maHocPhan: 'IR.001.02',
                tenHocPhan: 'L·ªãch s·ª≠ ngo·∫°i giao Vi·ªát Nam',
                lopHocPhan: 'LSNGVN-QHQT51',
                soThuTu: '2',
                thu: 6,
                ca: 2,
                phongHoc: 'D101',
                giangVien: 'Nguy·ªÖn Th√πy Minh, Ho√†ng Th·ªã H·∫°nh Trang'
            },
            {
                maHocPhan: 'IR.001.02',
                tenHocPhan: 'L·ªãch s·ª≠ ngo·∫°i giao Vi·ªát Nam',
                lopHocPhan: 'LSNGVN-QHQT51',
                soThuTu: '3',
                thu: 3,
                ca: 1,
                phongHoc: 'A604',
                giangVien: 'Nguy·ªÖn Th√πy Minh, Ho√†ng Th·ªã H·∫°nh Trang'
            },
            {
                maHocPhan: 'IR.001.02',
                tenHocPhan: 'L·ªãch s·ª≠ ngo·∫°i giao Vi·ªát Nam',
                lopHocPhan: 'LSNGVN-QHQT51',
                soThuTu: '4',
                thu: 3,
                ca: 2,
                phongHoc: 'A604',
                giangVien: 'Nguy·ªÖn Th·ªã Thu Th·ªßy'
            },
            {
                maHocPhan: 'IR.001.02',
                tenHocPhan: 'L·ªãch s·ª≠ ngo·∫°i giao Vi·ªát Nam',
                lopHocPhan: 'LSNGVN-QHQT51',
                soThuTu: '5',
                thu: 7,
                ca: 1,
                phongHoc: 'D101',
                giangVien: 'Nguy·ªÖn Th·ªã Thu Th·ªßy'
            },
            {
                maHocPhan: 'IR.040.03',
                tenHocPhan: 'L·ªãch s·ª≠ quan h·ªá qu·ªëc t·∫ø hi·ªán ƒë·∫°i 1 (1648-1945)',
                lopHocPhan: 'LSQHQTHƒêI-QHQT51',
                soThuTu: '1',
                thu: 6,
                ca: 1,
                phongHoc: 'A604',
                giangVien: 'Ho√†ng T√πng Lan'
            },
            {
                maHocPhan: 'IR.040.03',
                tenHocPhan: 'L·ªãch s·ª≠ quan h·ªá qu·ªëc t·∫ø hi·ªán ƒë·∫°i 1 (1648-1945)',
                lopHocPhan: 'LSQHQTHƒêI-QHQT51',
                soThuTu: '2',
                thu: 6,
                ca: 2,
                phongHoc: 'A604',
                giangVien: 'Ho√†ng T√πng Lan'
            },
            {
                maHocPhan: 'IR.040.03',
                tenHocPhan: 'L·ªãch s·ª≠ quan h·ªá qu·ªëc t·∫ø hi·ªán ƒë·∫°i 1 (1648-1945)',
                lopHocPhan: 'LSQHQTHƒêI-QHQT51',
                soThuTu: '3',
                thu: 3,
                ca: 1,
                phongHoc: 'A702',
                giangVien: 'Ho√†ng T√πng Lan'
            },
            {
                maHocPhan: 'IR.040.03',
                tenHocPhan: 'L·ªãch s·ª≠ quan h·ªá qu·ªëc t·∫ø hi·ªán ƒë·∫°i 1 (1648-1945)',
                lopHocPhan: 'LSQHQTHƒêI-QHQT51',
                soThuTu: '4',
                thu: 3,
                ca: 2,
                phongHoc: 'A702',
                giangVien: 'Nguy·ªÖn Th·ªã H·∫°nh, Ph·∫°m Ho√†ng S∆°n'
            },
            {
                maHocPhan: 'IR.040.03',
                tenHocPhan: 'L·ªãch s·ª≠ quan h·ªá qu·ªëc t·∫ø hi·ªán ƒë·∫°i 1 (1648-1945)',
                lopHocPhan: 'LSQHQTHƒêI-QHQT51',
                soThuTu: '5',
                thu: 7,
                ca: 2,
                phongHoc: 'D101',
                giangVien: 'Nguy·ªÖn Th·ªã H·∫°nh, Ph·∫°m Ho√†ng S∆°n'
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Lu·∫≠t hi·∫øn ph√°p Vi·ªát Nam v√† c√°c n∆∞·ªõc (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'LHPVN&CN-ALL',
                soThuTu: '1',
                thu: 4,
                ca: 4,
                phongHoc: 'A400',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'C√¥ng ph√°p qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'CPQT-ALL',
                soThuTu: '6',
                thu: 2,
                ca: 4,
                phongHoc: 'A404',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'C√¥ng ph√°p qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'CPQT-ALL',
                soThuTu: '7',
                thu: 3,
                ca: 3,
                phongHoc: 'HTB',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'C√¥ng ph√°p qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'CPQT-ALL',
                soThuTu: '8',
                thu: 7,
                ca: 2,
                phongHoc: 'D205',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'C√¥ng ph√°p qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'CPQT-ALL',
                soThuTu: '9',
                thu: 5,
                ca: 2,
                phongHoc: 'D205',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Kinh doanh qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'KDQT-ALL',
                soThuTu: '4',
                thu: 7,
                ca: 3,
                phongHoc: 'A300',
                giangVien: 'Nguy·ªÖn T∆∞·ªùng Lan'
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Kinh doanh qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'KDQT-ALL',
                soThuTu: '5',
                thu: 7,
                ca: 4,
                phongHoc: 'A300',
                giangVien: 'Nguy·ªÖn T∆∞·ªùng Lan'
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Kinh doanh qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'KDQT-ALL',
                soThuTu: '6',
                thu: 4,
                ca: 2,
                phongHoc: 'A400',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Quan h·ªá kinh t·∫ø qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'QHKTQT-ALL',
                soThuTu: '5',
                thu: 6,
                ca: 3,
                phongHoc: 'D101',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Quan h·ªá kinh t·∫ø qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'QHKTQT-ALL',
                soThuTu: '6',
                thu: 3,
                ca: 2,
                phongHoc: 'HTB',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Quan h·ªá kinh t·∫ø qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'QHKTQT-ALL',
                soThuTu: '7',
                thu: 4,
                ca: 3,
                phongHoc: 'A400',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Quan h·ªá kinh t·∫ø qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'QHKTQT-ALL',
                soThuTu: '8',
                thu: 7,
                ca: 3,
                phongHoc: 'A604',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Quan h·ªá kinh t·∫ø qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'QHKTQT-ALL',
                soThuTu: '9',
                thu: 2,
                ca: 3,
                phongHoc: 'A306',
                giangVien: ''
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'ƒê·∫°i c∆∞∆°ng truy·ªÅn th√¥ng qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'ƒêCTTQT-ALL',
                soThuTu: '7',
                thu: 4,
                ca: 4,
                phongHoc: 'HTB',
                giangVien: 'H·ªì Thanh T√πng'
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'ƒê·∫°i c∆∞∆°ng truy·ªÅn th√¥ng qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'ƒêCTTQT-ALL',
                soThuTu: '8',
                thu: 6,
                ca: 2,
                phongHoc: 'D110',
                giangVien: 'Nguy·ªÖn Minh Tu·∫•n'
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'ƒê·∫°i c∆∞∆°ng truy·ªÅn th√¥ng qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'ƒêCTTQT-ALL',
                soThuTu: '9',
                thu: 7,
                ca: 3,
                phongHoc: 'A702',
                giangVien: 'H·ªì Thanh T√πng'
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'ƒê·∫°i c∆∞∆°ng truy·ªÅn th√¥ng qu·ªëc t·∫ø (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'ƒêCTTQT-ALL',
                soThuTu: '10',
                thu: 2,
                ca: 1,
                phongHoc: 'A306',
                giangVien: 'H·ªì Thanh T√πng'
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Ngo·∫°i giao vƒÉn h√≥a (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'NGVH-ALL',
                soThuTu: '1',
                thu: 2,
                ca: 4,
                phongHoc: 'D101',
                giangVien: 'Tr·∫ßn Th·ªã H∆∞∆°ng, L∆∞∆°ng Th·ªã Thu H∆∞·ªùng'
            },
            {
                maHocPhan: 'B·ªï tr·ª£',
                tenHocPhan: 'Ngo·∫°i giao vƒÉn h√≥a (M√¥n b·ªï tr·ª£)',
                lopHocPhan: 'NGVH-ALL',
                soThuTu: '2',
                thu: 3,
                ca: 1,
                phongHoc: 'A400',
                giangVien: 'Tr·∫ßn Th·ªã H∆∞∆°ng, L∆∞∆°ng Th·ªã Thu H∆∞·ªùng'
            },

            // Ti·∫øng Anh chuy√™n ng√†nh II
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '11.1',
                thu: 2,
                ca: 1,
                phongHoc: 'D210',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '11.2',
                thu: 5,
                ca: 2,
                phongHoc: 'D204',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '12.1',
                thu: 2,
                ca: 1,
                phongHoc: 'D211',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '12.2',
                thu: 5,
                ca: 2,
                phongHoc: 'D210',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '13.1',
                thu: 2,
                ca: 1,
                phongHoc: 'D212',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '13.2',
                thu: 5,
                ca: 2,
                phongHoc: 'D211',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '14.1',
                thu: 2,
                ca: 1,
                phongHoc: 'D213',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '14.2',
                thu: 5,
                ca: 2,
                phongHoc: 'D213',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '15.1',
                thu: 2,
                ca: 2,
                phongHoc: 'D202',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '15.2',
                thu: 5,
                ca: 1,
                phongHoc: 'D201',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '16.1',
                thu: 2,
                ca: 2,
                phongHoc: 'D203',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '16.2',
                thu: 5,
                ca: 1,
                phongHoc: 'D202',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '17.1',
                thu: 2,
                ca: 2,
                phongHoc: 'D204',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '17.2',
                thu: 5,
                ca: 1,
                phongHoc: 'D203',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '18.1',
                thu: 2,
                ca: 2,
                phongHoc: 'D210',
                giangVien: ''
            },
            {
                maHocPhan: 'E50.06.03',
                tenHocPhan: 'Ti·∫øng Anh chuy√™n ng√†nh II',
                lopHocPhan: 'TACNII-QHQT51',
                soThuTu: '18.2',
                thu: 5,
                ca: 1,
                phongHoc: 'D204',
                giangVien: ''
            },
            // Add more English class pairs...
        ];

        const selectedClasses = new Map(); // Store selected classes by subject code

        function initializeTimetable() {
    const timetable = document.getElementById('timetable');

    // Create slots with times
    const timeSlots = [
        "7:00 - 9:30",
        "9:45 - 12:15",
        "12:45 - 15:15",
        "15:30 - 18:00"
    ];

    for (let slot = 0; slot < timeSlots.length; slot++) {
        const slotLabel = document.createElement('div');
        slotLabel.className = 'cell header';
        slotLabel.textContent = `Ca ${slot + 1}: ${timeSlots[slot]}`;
        timetable.appendChild(slotLabel);

        for (let day = 2; day <= 7; day++) {
            const cell = document.createElement('div');
            cell.className = 'cell';
            cell.id = `day${day}-ca${slot + 1}`;

            // Find and add classes for this timeslot
            const classes = classData.filter(c => c.thu === day && c.ca === slot + 1);
            classes.forEach(classInfo => {
                const classElement = createClassElement(classInfo);
                cell.appendChild(classElement);
            });

            timetable.appendChild(cell);
        }
    }
}

        function createClassElement(classInfo) {
            const div = document.createElement('div');
            div.className = 'class-slot';
            div.innerHTML = `
                ${classInfo.tenHocPhan}<br>
                L·ªõp: ${classInfo.lopHocPhan}-${classInfo.soThuTu}<br>
                Ph√≤ng: ${classInfo.phongHoc}<br>
                ${classInfo.giangVien ? 'GV: ' + classInfo.giangVien : ''}
            `;
            div.dataset.classInfo = JSON.stringify(classInfo);
            div.onclick = () => toggleClassSelection(div, classInfo);
            return div;
        }

        function toggleClassSelection(element, classInfo) {
            if (element.classList.contains('disabled')) {
                return;
            }

            const isEnglishClass = classInfo.maHocPhan === 'E50.06.03';
            
            if (element.classList.contains('selected')) {
                // Deselect
                element.classList.remove('selected');
                if (isEnglishClass) {
                    const englishClasses = selectedClasses.get('E50.06.03') || [];
                    selectedClasses.set('E50.06.03', 
                        englishClasses.filter(c => c.soThuTu !== classInfo.soThuTu));
                } else {
                    selectedClasses.delete(classInfo.maHocPhan);
                }
            } else {
                // Select
                if (isEnglishClass) {
                    handleEnglishClassSelection(element, classInfo);
                } else {
                    handleRegularClassSelection(element, classInfo);
                }
            }
            
            updateSelectedClassesList();
            updateConflicts();
        }

        function handleEnglishClassSelection(element, classInfo) {
            const englishClasses = selectedClasses.get('E50.06.03') || [];
            
            if (englishClasses.length >= 2) {
                showWarning("B·∫°n ch·ªâ ƒë∆∞·ª£c ch·ªçn 2 l·ªõp Ti·∫øng Anh chuy√™n ng√†nh II");
                return;
            }

            const currentNumber = classInfo.soThuTu.split('.')[0];
            const isPair1 = classInfo.soThuTu.endsWith('.1');
            const hasPair1 = englishClasses.some(c => c.soThuTu.endsWith('.1'));
            const hasPair2 = englishClasses.some(c => c.soThuTu.endsWith('.2'));

            // Check if the selected class matches the numbering of existing selection
            if (englishClasses.length > 0) {
                const existingNumber = englishClasses[0].soThuTu.split('.')[0];
                if (currentNumber !== existingNumber) {
                    showWarning("B·∫°n ph·∫£i ch·ªçn c√πng m·ªôt c·∫∑p l·ªõp (v√≠ d·ª•: 11.1 v√† 11.2)");
                    return;
                }
            }

            if ((isPair1 && hasPair1) || (!isPair1 && hasPair2)) {
                showWarning("B·∫°n ph·∫£i ch·ªçn m·ªôt l·ªõp .1 v√† m·ªôt l·ªõp .2 t∆∞∆°ng ·ª©ng");
                return;
            }

            element.classList.add('selected');
            englishClasses.push(classInfo);
            selectedClasses.set('E50.06.03', englishClasses);
        }

        function handleRegularClassSelection(element, classInfo) {
            if (selectedClasses.has(classInfo.maHocPhan)) {
                showWarning("B·∫°n ch·ªâ ƒë∆∞·ª£c ch·ªçn m·ªôt l·ªõp cho m·ªói h·ªçc ph·∫ßn/ 1 h·ªçc ph·∫ßn b·ªï tr·ª£");
                return;
            }

            element.classList.add('selected');
            selectedClasses.set(classInfo.maHocPhan, [classInfo]);
        }

        function updateSelectedClassesList() {
    const organizedList = document.getElementById('organizedList');
    organizedList.innerHTML = '';
    
    // Create a structured object to organize classes by time
    const timeSlots = {};
    
    selectedClasses.forEach((classes) => {
        classes.forEach(classInfo => {
            const timeKey = `Th·ª© ${classInfo.thu} - Ca ${classInfo.ca}`;
            if (!timeSlots[timeKey]) {
                timeSlots[timeKey] = [];
            }
            timeSlots[timeKey].push(classInfo);
        });
    });

    // Sort by day and time
    const sortedTimes = Object.keys(timeSlots).sort((a, b) => {
        const [dayA, caA] = a.match(/\d+/g).map(Number);
        const [dayB, caB] = b.match(/\d+/g).map(Number);
        return dayA !== dayB ? dayA - dayB : caA - caB;
    });

    // Create the organized list
    sortedTimes.forEach(timeKey => {
        const timeGroup = document.createElement('div');
        timeGroup.className = 'time-group';

        const timeHeader = document.createElement('div');
        timeHeader.className = 'time-header';
        timeHeader.textContent = timeKey;
        timeGroup.appendChild(timeHeader);

        timeSlots[timeKey].forEach(classInfo => {
            const subjectItem = document.createElement('div');
            subjectItem.className = 'subject-item';
            subjectItem.textContent = `${classInfo.tenHocPhan} - L·ªõp ${classInfo.soThuTu} - Ph√≤ng ${classInfo.phongHoc}`;
            timeGroup.appendChild(subjectItem);
        });

        organizedList.appendChild(timeGroup);
    });

    // Show/hide the buttons
    const hideUnselectedBtn = document.getElementById('hideUnselectedBtn');
    const exportBtn = document.getElementById('exportBtn');
    const isSelectionComplete = checkIfSelectionComplete();
    
    // Show both buttons when any class is selected
    const hasAnySelection = selectedClasses.size > 0;
    hideUnselectedBtn.style.display = hasAnySelection ? 'block' : 'none';
    exportBtn.style.display = hasAnySelection ? 'block' : 'none';

    // Show incomplete selection warning
    const warnings = document.getElementById('warnings');
    const existingIncompleteWarning = warnings.querySelector('.incomplete-warning');
    
    if (hasAnySelection && !isSelectionComplete) {
        if (!existingIncompleteWarning) {
            const warning = document.createElement('div');
            warning.className = 'warning incomplete-warning';
            warning.textContent = 'B·∫°n ch∆∞a ch·ªçn ƒë·ªß c√°c m√¥n h·ªçc. Vui l√≤ng ch·ªçn ƒë·∫ßy ƒë·ªß c√°c m√¥n h·ªçc theo ch∆∞∆°ng tr√¨nh.';
            warnings.appendChild(warning);
        }
    } else if (existingIncompleteWarning) {
        existingIncompleteWarning.remove();
    }
}

        function checkIfSelectionComplete() {
            // Check if all required subjects are selected
            const requiredSubjects = new Set(classData.map(c => c.maHocPhan));
            const selectedSubjects = new Set(selectedClasses.keys());
            
            // Special check for English classes
            const englishClasses = selectedClasses.get('E50.06.03') || [];
            const isEnglishComplete = englishClasses.length === 2 && 
                englishClasses.some(c => c.soThuTu.endsWith('.1')) && 
                englishClasses.some(c => c.soThuTu.endsWith('.2'));

            // Remove English from the check if it's complete
            if (isEnglishComplete) {
                requiredSubjects.delete('E50.06.03');
                selectedSubjects.delete('E50.06.03');
            }

            // Check if all other subjects are selected
            return [...requiredSubjects].every(subject => 
                subject === 'E50.06.03' ? isEnglishComplete : selectedSubjects.has(subject)
            );
        }

        function toggleUnselectedClasses() {
    const btn = document.getElementById('hideUnselectedBtn');
    const isHiding = !btn.classList.contains('show-all-btn');
    
    document.querySelectorAll('.class-slot').forEach(slot => {
        if (!slot.classList.contains('selected')) {
            slot.classList.toggle('hidden');
        }
    });

    // Toggle button text and style
    if (isHiding) {
        btn.textContent = 'Hi·ªÉn th·ªã t·∫•t c·∫£ l·ªõp';
        btn.classList.add('show-all-btn');
    } else {
        btn.textContent = '·∫®n c√°c l·ªõp ch∆∞a ch·ªçn';
        btn.classList.remove('show-all-btn');
    }
}

        // Add event listener for the hide unselected button
        document.getElementById('hideUnselectedBtn').addEventListener('click', toggleUnselectedClasses);

        function updateConflicts() {
            // Reset all disabled states
            document.querySelectorAll('.class-slot').forEach(slot => {
                slot.classList.remove('disabled');
            });

            // Check for time conflicts
            const selectedTimes = new Set();
            selectedClasses.forEach((classes) => {
                classes.forEach(classInfo => {
                    selectedTimes.add(`${classInfo.thu}-${classInfo.ca}`);
                });
            });

            // Disable conflicting slots
            document.querySelectorAll('.class-slot:not(.selected)').forEach(slot => {
                const classInfo = JSON.parse(slot.dataset.classInfo);
                const timeKey = `${classInfo.thu}-${classInfo.ca}`;
                if (selectedTimes.has(timeKey)) {
                    slot.classList.add('disabled');
                }
            });
        }

        function showWarning(message) {
            const warnings = document.getElementById('warnings');
            const warning = document.createElement('div');
            warning.className = 'warning';
            warning.textContent = message;
            warnings.appendChild(warning);
    
            // Remove this specific warning after 5 seconds
            setTimeout(() => {
                if (warnings.contains(warning)) {
                  warning.remove();
                }
            }, 5000);
        }
        function exportToTxt() {
            let content = "K·∫æ HO·∫†CH ƒêƒÇNG K√ù H·ªåC PH·∫¶N\n";
            content += "=========================\n\n";
            content += "H√£y nh·ªõ ƒëƒÉng k√Ω t·ª´ 8h ng√†y 02/1/2025\n\n";
    
            const now = new Date();
            content += `Th·ªùi gian xu·∫•t: ${now.toLocaleString('vi-VN')}\n\n`;
    
            content += "TH·ªúI GIAN C√ÅC CA H·ªåC:\n";
            content += "Ca 1: 7:00-9:30\n";
            content += "Ca 2: 9:45-12:15\n";
            content += "Ca 3: 12:45-15:15\n";
            content += "Ca 4: 15:30-18:00\n\n";

            content += "C√ÅC L·ªöP ƒê√É CH·ªåN:\n";
            content += "=========================\n\n";

            const organizedList = document.getElementById('organizedList');
            const timeGroups = organizedList.getElementsByClassName('time-group');
    
            Array.from(timeGroups).forEach(group => {
                    const timeHeader = group.getElementsByClassName('time-header')[0].textContent;
                    const subjects = group.getElementsByClassName('subject-item');
        
                    content += `${timeHeader}:\n`;
                    Array.from(subjects).forEach(subject => {
                      content += `${subject.textContent}\n`;
                    });
                    content += "\n";
            });

            const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ke_hoach_dang_ky_${now.getTime()}.txt`;
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
        }
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('exportBtn').addEventListener('click', exportToTxt);
        });

        // Initialize
        initializeTimetable();
    </script>
</body>
</html>